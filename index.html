<!DOCTYPE html>
<html ng-app="Store">
  <head>
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <script type="text/javascript" src="angular.min.js"></script>
    <script type="text/javascript" src="app.js"></script>	
  </head>

  <style>
  body { 
	padding-top: 25px;
    padding-right: 50px;
    padding-bottom: 25px;
    padding-left: 50px;
  }
  
  #reviewForm {
      padding-left: 100px;
  }
  </style>
  <body ng-controller="storeController as store">
    <!--  Store Header  -->
	<center><h1>
		Welcome to our shop!<br>
		<small>
			Where we sell the same overpriced crap as others, but at least we're honest!
		</small>
	</h1></center>
	<div ng-controller="itemSelector as item">
		<table  class="table" >
			<!--  
			info: item.isSet($index) is used to highlight the selected table row (applies the info class, from bootstrap)
			-->
			<tr ng-class="{info: item.isSet($index)}" ng-repeat="product in store.products" ng-click="item.setItem($index)">
				<td class="col-md-4">{{ product.name }}</td>
				<td class="col-md-4">{{ product.price | currency }}</td>
				<td ng-show="product.img" class="col-md-4 thumbnail">
					<img ng-src="{{ product.img }}"/>
				</td>
				<td ng-hide="product.img">
					<i>Image does not exist</i>
				</td>
				
			</tr>

		</table>
		
		<form id="reviewForm" name="reviewForm" ng-controller="reviewController as revCtrl" ng-submit="revCtrl.addReview( store.products[item.itemIndex()] )" >
			<h3>Reviews:</h3>			
			<div ng-repeat="review in store.products[item.itemIndex()].reviews" >
					{{ review }}
					<br>------------
			</div>		
			<fieldset>			
				<textarea ng-model="revCtrl.newReview" placeholder="Write a short review of the product..." title="Review"></textarea>
			</fieldset>					
			<fieldset>				
				<input type="submit" value="Submit Review" />
			</fieldset>			
		</form>
	</div>
	

  </body>
</html>
